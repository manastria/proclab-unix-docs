<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Activité pédagogique pour comprendre les processus Linux"><link href=../fg-bg/ rel=prev><link href=../zombie/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.14"><title>Les états des processus - Découverte pratique de la gestion des processus sous Linux</title><link rel=stylesheet href=../../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.d62c99.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta name=chapter content=1></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#scenario-etats-des-processus class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=../.. title="Découverte pratique de la gestion des processus sous Linux" class="md-header__button md-logo" aria-label="Découverte pratique de la gestion des processus sous Linux" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Découverte pratique de la gestion des processus sous Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Les états des processus </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Recherche> <button type=reset class="md-search__icon md-icon" title=Effacer aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/manastria/proclab-unix-docs title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> proclab-unix-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Onglets data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Accueil </a> </li> <li class=md-tabs__item> <a href=../../installation/ class=md-tabs__link> Installation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Activités </a> </li> <li class=md-tabs__item> <a href=../../ressources/processus/ class=md-tabs__link> Ressources </a> </li> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> À propos </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Découverte pratique de la gestion des processus sous Linux" class="md-nav__button md-logo" aria-label="Découverte pratique de la gestion des processus sous Linux" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Découverte pratique de la gestion des processus sous Linux </label> <div class=md-nav__source> <a href=https://github.com/manastria/proclab-unix-docs title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> proclab-unix-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Accueil </span> </a> </li> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Activités </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Activités </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../terminal/ class=md-nav__link> <span class=md-ellipsis> Terminal et processus </span> </a> </li> <li class=md-nav__item> <a href=../arbo/ class=md-nav__link> <span class=md-ellipsis> Arborescence </span> </a> </li> <li class=md-nav__item> <a href=../fg-bg/ class=md-nav__link> <span class=md-ellipsis> Gestion Foreground/Background </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Les états des processus </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Les états des processus </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#objectifs-dapprentissage class=md-nav__link> <span class=md-ellipsis> Objectifs d'apprentissage </span> </a> </li> <li class=md-nav__item> <a href=#preparation-notre-laboratoire-dobservation class=md-nav__link> <span class=md-ellipsis> Préparation : Notre laboratoire d’observation </span> </a> <nav class=md-nav aria-label="Préparation : Notre laboratoire d’observation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mise-en-place-du-laboratoire class=md-nav__link> <span class=md-ellipsis> Mise en place du laboratoire </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#partie-1-premiers-pas-dans-lobservation-des-processus class=md-nav__link> <span class=md-ellipsis> Partie 1 : Premiers pas dans l’observation des processus </span> </a> <nav class=md-nav aria-label="Partie 1 : Premiers pas dans l’observation des processus"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#le-pid-la-carte-didentite-dun-processus class=md-nav__link> <span class=md-ellipsis> Le PID : La carte d’identité d’un processus </span> </a> </li> <li class=md-nav__item> <a href=#a-la-recherche-du-pid-perdu class=md-nav__link> <span class=md-ellipsis> À la recherche du PID perdu </span> </a> </li> <li class=md-nav__item> <a href=#la-magie-de-la-substitution-de-commande class=md-nav__link> <span class=md-ellipsis> La magie de la substitution de commande </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#partie-2-observer-les-etats-des-processus class=md-nav__link> <span class=md-ellipsis> Partie 2 : Observer les états des processus </span> </a> <nav class=md-nav aria-label="Partie 2 : Observer les états des processus"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#les-etats-le-cycle-de-vie-dun-processus class=md-nav__link> <span class=md-ellipsis> Les états : Le cycle de vie d'un processus </span> </a> </li> <li class=md-nav__item> <a href=#notre-outil-dobservation-lalias-psess class=md-nav__link> <span class=md-ellipsis> Notre outil d'observation : L'alias psess </span> </a> </li> <li class=md-nav__item> <a href=#observer-notre-processus class=md-nav__link> <span class=md-ellipsis> Observer notre processus </span> </a> </li> <li class=md-nav__item> <a href=#observation-en-temps-reel-avec-htop class=md-nav__link> <span class=md-ellipsis> Observation en temps réel avec htop </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#partie-3-premiers-pas-dans-la-manipulation-des-processus class=md-nav__link> <span class=md-ellipsis> Partie 3 : Premiers pas dans la manipulation des processus </span> </a> <nav class=md-nav aria-label="Partie 3 : Premiers pas dans la manipulation des processus"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mettre-un-processus-en-pause class=md-nav__link> <span class=md-ellipsis> Mettre un processus en pause </span> </a> </li> <li class=md-nav__item> <a href=#reprendre-lexecution class=md-nav__link> <span class=md-ellipsis> Reprendre l'exécution </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conclusion-et-prochaines-etapes class=md-nav__link> <span class=md-ellipsis> Conclusion et prochaines étapes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../signal.md class=md-nav__link> <span class=md-ellipsis> Les signaux </span> </a> </li> <li class=md-nav__item> <a href=../zombie/ class=md-nav__link> <span class=md-ellipsis> Processus zombies </span> </a> </li> <li class=md-nav__item> <a href=../orphelin/ class=md-nav__link> <span class=md-ellipsis> Processus orphelins </span> </a> </li> <li class=md-nav__item> <a href=../priorites/ class=md-nav__link> <span class=md-ellipsis> Priorités </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Ressources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Ressources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ressources/processus/ class=md-nav__link> <span class=md-ellipsis> Processus Unix </span> </a> </li> <li class=md-nav__item> <a href=../../ressources/signaux/ class=md-nav__link> <span class=md-ellipsis> Signaux </span> </a> </li> <li class=md-nav__item> <a href=../../ressources/commandes.md class=md-nav__link> <span class=md-ellipsis> Commandes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> À propos </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/manastria/proclab-unix-docs/edit/master/docs/activites/etats.md title="Editer cette page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=scenario-etats-des-processus>Scénario : États des processus</h1> <p>Imaginez que vous êtes un détective qui observe le comportement des processus sur votre système. Dans ce scénario, nous allons découvrir comment les processus « vivent » dans Linux, quels états ils peuvent prendre, et comment nous pouvons les observer et les influencer.</p> <h2 id=objectifs-dapprentissage>Objectifs d'apprentissage</h2> <p>À la fin de ce scénario, vous serez capable de :</p> <ul> <li>Comprendre ce qu’est l’état d’un processus et pourquoi il change</li> <li>Utiliser des outils pour observer ces états</li> <li>Manipuler l’état d’un processus de manière basique</li> </ul> <h2 id=preparation-notre-laboratoire-dobservation>Préparation : Notre laboratoire d’observation</h2> <p>Pour mener nos expériences, nous allons utiliser deux outils :</p> <ol> <li> <p><strong>Le programme procstate</strong> : Un programme spécial qui va nous montrer de manière visible les différents états d’un processus. C’est comme une petite souris de laboratoire qui va nous aider à comprendre le comportement des processus.</p> </li> <li> <p><strong>Terminator</strong> : Notre « laboratoire » avec deux zones d’observation :</p> </li> <li>À gauche : pour exécuter notre programme</li> <li>À droite : pour l’observer avec différents outils</li> </ol> <h3 id=mise-en-place-du-laboratoire>Mise en place du laboratoire</h3> <ol> <li>Ouvrez Terminator</li> <li>Appuyez sur <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-shift>Shift</kbd><span>+</span><kbd class=key-e>E</kbd></span> pour diviser la fenêtre verticalement</li> <li>Vous avez maintenant deux terminaux côte à côte</li> </ol> <h2 id=partie-1-premiers-pas-dans-lobservation-des-processus>Partie 1 : Premiers pas dans l’observation des processus</h2> <h3 id=le-pid-la-carte-didentite-dun-processus>Le PID : La carte d’identité d’un processus</h3> <p>Avant de commencer nos observations, nous devons comprendre comment identifier un processus. Sous Linux, chaque processus reçoit un numéro unique appelé PID (<em>Process IDentifier</em>). C’est comme un numéro de sécurité sociale pour les processus — il est unique et permet de les identifier sans ambiguïté.</p> <p>Dans le terminal de gauche, lancez notre programme d’observation :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>./procstate
</code></pre></div> <p>Vous devriez voir quelque chose comme :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>[Début] PID = 1234
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>Ce programme alterne 5 s de calcul intensif (BUSY) et 3 s de sommeil (SLEEP).
</code></pre></div> <div class="admonition question"> <p class=admonition-title>Réflexion initiale</p> <p>Commencez par observer le PID affiché lorsque le programme est lancé. Voici les étapes à suivre pour vérifier si le PID change à chaque exécution :</p> <ol> <li>Notez le PID actuel affiché à l’écran.</li> <li>Arrêtez le programme en utilisant la combinaison de touches <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-c>C</kbd></span>.</li> <li>Relancez le programme et comparez le PID affiché avec celui noté précédemment.</li> </ol> <p><strong>Question :</strong> Le PID est-il identique à chaque lancement ?</p> <p>Ensuite, réfléchissez à la question suivante : pourquoi pensez-vous que chaque processus a besoin d’un identifiant unique ?</p> </div> <h3 id=a-la-recherche-du-pid-perdu>À la recherche du PID perdu</h3> <p>Si vous perdez le PID de vue ou si vous lancez plusieurs instances du programme, Linux fournit un outil très pratique pour retrouver les PID : la commande <code>pidof</code>. Elle fait exactement ce que son nom suggère — elle trouve le PID d’un programme à partir de son nom.</p> <p>Dans le terminal de droite, exécutez :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>pidof<span class=w> </span>procstate
</code></pre></div> <div class="admonition note"> <p class=admonition-title>Comment fonctionne pidof</p> <p>La commande <code>pidof</code> cherche dans la liste des processus en cours d’exécution et affiche les PID des processus qui correspondent au nom donné. C’est comme demander : « Qui s’appelle procstate parmi les processus en cours ? »</p> <p>Si vous lancez plusieurs fois le même programme, <code>pidof</code> affichera plusieurs PID, un pour chaque instance en cours d'exécution.</p> </div> <h3 id=la-magie-de-la-substitution-de-commande>La magie de la substitution de commande</h3> <p>Dans le shell Linux, nous pouvons utiliser le résultat d’une commande directement dans une autre commande. C’est ce qu’on appelle la substitution de commande, et elle se fait avec la syntaxe <code>$(commande)</code>.</p> <p>Essayons de comprendre avec un exemple simple. Dans le terminal de droite, tapez :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Bonjour, nous sommes le </span><span class=k>$(</span>date<span class=k>)</span><span class=s2>&quot;</span>
</code></pre></div> <p>Dans cette commande :</p> <ol> <li>Le shell exécute d’abord la commande entre <code>$( )</code></li> <li>Il remplace ensuite toute l'expression $(date) par son résultat</li> <li>Finalement, il exécute la commande echo avec le texte substitué</li> </ol> <p>C'est comme si vous disiez au shell : "Là où tu vois $(commande), remplace-le par ce que cette commande afficherait si tu l'exécutais."</p> <div class="admonition exercise"> <p class=admonition-title>Exercice : Comprendre la substitution</p> <ol> <li>Exécutez ces deux commandes et comparez leurs résultats : <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Le PID est </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span><span class=s2>&quot;</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Le PID est pidof procstate&quot;</span>
</code></pre></div></li> <li>Quelle est la différence ? Pourquoi ?</li> <li>Inventez votre propre commande utilisant <code>$(...)</code> avec une autre commande Linux que vous connaissez.</li> </ol> </div> <h2 id=partie-2-observer-les-etats-des-processus>Partie 2 : Observer les états des processus</h2> <h3 id=les-etats-le-cycle-de-vie-dun-processus>Les états : Le cycle de vie d'un processus</h3> <p>Un processus n'est pas toujours en train de calculer. Comme nous les humains, il peut être dans différents états :</p> <ol> <li><strong>En cours d'exécution</strong> (<em>Running</em> - <code>R</code>) : </li> <li>Le processus est actuellement en train de calculer</li> <li> <p>Comme quand vous êtes concentré sur un calcul mental</p> </li> <li> <p><strong>En sommeil</strong> (<em>Sleeping</em> - <code>S</code>) :</p> </li> <li>Le processus attend quelque chose (une entrée, un timer...)</li> <li> <p>Comme quand vous attendez le bus - vous ne faites rien mais vous êtes prêt à réagir</p> </li> <li> <p><strong>Suspendu</strong> (<em>Stopped</em> - <code>T</code>) :</p> </li> <li>Le processus est temporairement arrêté</li> <li>Comme quand vous mettez une vidéo en pause</li> </ol> <pre class=mermaid><code>stateDiagram-v2
    [*] --&gt; Ready : Création
    Ready --&gt; Running : Sélection
    Running --&gt; Ready : Préemption
    Running --&gt; Sleeping : Attente E/S
    Sleeping --&gt; Ready : E/S terminée
    Running --&gt; Stopped : Signal STOP
    Stopped --&gt; Ready : Signal CONT

    note right of Ready : Prêt à s'exécuter
    note right of Running : En train de calculer
    note right of Sleeping : En attente
    note right of Stopped : En pause</code></pre> <p>Ce diagramme montre comment un processus passe d'un état à l'autre :</p> <ul> <li>Quand il est créé, il est d'abord prêt à s'exécuter</li> <li>Le système le sélectionne pour s'exécuter (état Running)</li> <li>S'il doit attendre quelque chose, il passe en Sleeping</li> <li>On peut le mettre en pause (Stopped) et le reprendre plus tard</li> </ul> <h3 id=notre-outil-dobservation-lalias-psess>Notre outil d'observation : L'alias psess</h3> <p>Pour observer facilement les processus, nous allons créer un outil personnalisé. En Linux, on peut créer des raccourcis de commande appelés "alias". Voici un alias très utile pour observer les processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Affiche les processus avec les colonnes essentielles pour une analyse rapide :</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1>#   - PPID : PID du processus parent.</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1>#   - PID  : Identifiant du processus.</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c1>#   - STAT : État du processus (Running, Sleeping, etc.).</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=c1>#   - TTY  : Terminal associé au processus (ou ? si aucun).</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=c1>#   - USER : Utilisateur propriétaire du processus.</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=c1>#   - CMD  : Commande utilisée pour démarrer le processus.</span>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=nb>alias</span><span class=w> </span><span class=nv>psess</span><span class=o>=</span><span class=s1>&#39;ps -o ppid,pid,stat,tty,user,cmd&#39;</span>
</code></pre></div> <p>C'est comme créer notre propre loupe d'observation, spécialement adaptée pour voir ce qui nous intéresse dans les processus.</p> <div class="admonition tip"> <p class=admonition-title>Conseil pratique</p> <p>Pour garder cet outil toujours disponible, ajoutez cette ligne dans votre fichier <code>~/.bashrc</code>. C'est comme ranger notre loupe dans un tiroir facilement accessible !</p> </div> <h3 id=observer-notre-processus>Observer notre processus</h3> <p>Maintenant que nous avons notre outil, observons notre processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>psess<span class=w> </span>-p<span class=w> </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span>
</code></pre></div> <div class="admonition exercise"> <p class=admonition-title>Exercice d'observation</p> <p>Observez pendant au moins 30 secondes et notez : 1. Les différents états que vous voyez dans la colonne STAT 2. À quel moment de l'affichage du programme ils correspondent 3. Le PPID (Process Parent ID) - qui est le "parent" de notre processus ?</p> </div> <p>Analysons chaque colonne de la sortie :</p> <ul> <li>PPID : Le PID du processus qui a créé celui-ci (généralement votre shell)</li> <li>PID : L'identifiant unique de notre processus</li> <li>STAT : L'état actuel (R, S, ou T)</li> <li>TTY : Le terminal associé</li> <li>USER : Qui a lancé le processus</li> <li>CMD : La commande qui tourne</li> </ul> <h3 id=observation-en-temps-reel-avec-htop>Observation en temps réel avec htop</h3> <p>Pour une vue plus dynamique, nous pouvons utiliser htop :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>htop<span class=w> </span>-p<span class=w> </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span>
</code></pre></div> <p>htop nous montre :</p> <ul> <li>L'utilisation CPU en temps réel</li> <li>L'état du processus qui change</li> <li>La mémoire utilisée</li> <li>Et bien d'autres informations</li> </ul> <div class="admonition tip"> <p class=admonition-title>Navigation dans htop</p> <ul> <li><span class=keys><kbd class=key-f4>F4</kbd></span> : Filtre pour voir uniquement certains processus</li> <li><span class=keys><kbd class=key-q>Q</kbd></span> : Quitter htop</li> <li>Les barres de couleur montrent l'intensité d'utilisation du CPU</li> </ul> </div> <h2 id=partie-3-premiers-pas-dans-la-manipulation-des-processus>Partie 3 : Premiers pas dans la manipulation des processus</h2> <p>Maintenant que nous savons observer, essayons d'influencer le comportement de notre processus.</p> <div class="admonition warning"> <p class=admonition-title>Note importante</p> <p>Dans ce scénario, nous allons simplement voir comment "mettre en pause" un processus. Les signaux et la commande kill seront expliqués en détail dans les prochains scénarios. Pour l'instant, considérez les commandes suivantes comme des "formules magiques" que nous comprendrons mieux plus tard.</p> </div> <h3 id=mettre-un-processus-en-pause>Mettre un processus en pause</h3> <p>Dans le scénario précédent, nous avons vu comment suspendre un processus avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> et le reprendre avec les commandes <code>fg</code> et <code>bg</code>. Ici, nous allons découvrir une autre méthode qui ne nécessite pas d'avoir accès au terminal où le processus s'exécute.</p> <p>Pour suspendre temporairement notre processus depuis n'importe quel terminal :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nb>kill</span><span class=w> </span>-STOP<span class=w> </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span>
</code></pre></div> <p>Cette commande utilise la substitution que nous avons apprise précédemment pour envoyer un signal STOP au bon processus.</p> <p>Vérifiez immédiatement l'état :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>psess<span class=w> </span>-p<span class=w> </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span>
</code></pre></div> <p>Vous devriez voir l'état 'T' (Stopped).</p> <h3 id=reprendre-lexecution>Reprendre l'exécution</h3> <p>Pour faire reprendre le processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nb>kill</span><span class=w> </span>-CONT<span class=w> </span><span class=k>$(</span>pidof<span class=w> </span>procstate<span class=k>)</span>
</code></pre></div> <div class="admonition exercise"> <p class=admonition-title>Exercice final de synthèse</p> <ol> <li>Lancez deux instances de procstate dans des terminaux différents</li> <li>Observez leurs états avec psess</li> <li>Mettez-en un en pause avec kill -STOP</li> <li>Que remarquez-vous ?<ul> <li>L'autre instance continue-t-elle de fonctionner ?</li> <li>Les PID sont-ils différents ?</li> <li>Les états sont-ils indépendants ?</li> </ul> </li> </ol> </div> <h2 id=conclusion-et-prochaines-etapes>Conclusion et prochaines étapes</h2> <p>Nous avons découvert :</p> <ul> <li>Comment identifier un processus avec son PID</li> <li>Les différents états qu'un processus peut prendre</li> <li>Comment observer ces états</li> <li>Comment mettre en pause et reprendre un processus</li> </ul> <p>Dans les prochains scénarios, nous approfondirons :</p> <ul> <li>Les signaux et la commande kill en détail</li> <li>Les états spéciaux comme les zombies</li> <li>Et bien d'autres aspects passionnants des processus Linux !</li> </ul> <div class="admonition question"> <p class=admonition-title>Questions de réflexion finale</p> <ol> <li>Pourquoi un processus passe-t-il en état Sleeping ?</li> <li>Un processus en état Stopped consomme-t-il du CPU ?</li> <li>Que pourrait-il se passer si on ferme le terminal d'un processus suspendu ?</li> </ol> </div> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Retour en haut de la page </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Pied de page"> <a href=../fg-bg/ class="md-footer__link md-footer__link--prev" aria-label="Précédent: Gestion Foreground/Background"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Précédent </span> <div class=md-ellipsis> Gestion Foreground/Background </div> </div> </a> <a href=../zombie/ class="md-footer__link md-footer__link--next" aria-label="Suivant: Processus zombies"> <div class=md-footer__title> <span class=md-footer__direction> Suivant </span> <div class=md-ellipsis> Processus zombies </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.footer", "content.action.edit", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script> <script src=../../assets/javascripts/bundle.cd18aaf1.min.js></script> <script src=../../assets/extra.38b060.min.js></script> </body> </html>