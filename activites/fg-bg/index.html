<!doctype html><html lang=fr class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Activité pédagogique pour comprendre les processus Linux"><link href=../arbo/ rel=prev><link href=../etats/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.4.14"><title>Gestion Foreground/Background - Découverte pratique de la gestion des processus sous Linux</title><link rel=stylesheet href=../../assets/stylesheets/main.fad675c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.d62c99.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#scenario-gestion-foregroundbackground class=md-skip> Aller au contenu </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=En-tête> <a href=../.. title="Découverte pratique de la gestion des processus sous Linux" class="md-header__button md-logo" aria-label="Découverte pratique de la gestion des processus sous Linux" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Découverte pratique de la gestion des processus sous Linux </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Gestion Foreground/Background </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Rechercher placeholder=Rechercher autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Recherche> <button type=reset class="md-search__icon md-icon" title=Effacer aria-label=Effacer tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initialisation de la recherche </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/manastria/proclab-unix-docs title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> proclab-unix-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Onglets data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Accueil </a> </li> <li class=md-tabs__item> <a href=../../installation/ class=md-tabs__link> Installation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Activités </a> </li> <li class=md-tabs__item> <a href=../../ressources/processus/ class=md-tabs__link> Ressources </a> </li> <li class=md-tabs__item> <a href=../../about/ class=md-tabs__link> À propos </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Découverte pratique de la gestion des processus sous Linux" class="md-nav__button md-logo" aria-label="Découverte pratique de la gestion des processus sous Linux" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Découverte pratique de la gestion des processus sous Linux </label> <div class=md-nav__source> <a href=https://github.com/manastria/proclab-unix-docs title="Aller au dépôt" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> proclab-unix-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Accueil </span> </a> </li> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Activités </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Activités </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../terminal/ class=md-nav__link> <span class=md-ellipsis> Terminal et processus </span> </a> </li> <li class=md-nav__item> <a href=../arbo/ class=md-nav__link> <span class=md-ellipsis> Arborescence </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Gestion Foreground/Background </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Gestion Foreground/Background </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table des matières"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table des matières </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#objectifs-dapprentissage class=md-nav__link> <span class=md-ellipsis> Objectifs d'apprentissage </span> </a> </li> <li class=md-nav__item> <a href=#concepts-fondamentaux class=md-nav__link> <span class=md-ellipsis> Concepts fondamentaux </span> </a> <nav class=md-nav aria-label="Concepts fondamentaux"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#premier-plan-et-arriere-plan class=md-nav__link> <span class=md-ellipsis> Premier plan et arrière-plan </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#mise-en-pratique class=md-nav__link> <span class=md-ellipsis> Mise en pratique </span> </a> <nav class=md-nav aria-label="Mise en pratique"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#preparation-de-lenvironnement class=md-nav__link> <span class=md-ellipsis> Préparation de l'environnement </span> </a> </li> <li class=md-nav__item> <a href=#etape-1-observer-la-suspension-dun-processus class=md-nav__link> <span class=md-ellipsis> Étape 1 : Observer la suspension d'un processus </span> </a> </li> <li class=md-nav__item> <a href=#etape-2-gerer-plusieurs-processus class=md-nav__link> <span class=md-ellipsis> Étape 2 : Gérer plusieurs processus </span> </a> </li> <li class=md-nav__item> <a href=#etape-3-execution-en-arriere-plan class=md-nav__link> <span class=md-ellipsis> Étape 3 : Exécution en arrière-plan </span> </a> </li> <li class=md-nav__item> <a href=#etape-4-comprendre-le-controle-de-flux class=md-nav__link> <span class=md-ellipsis> Étape 4 : Comprendre le contrôle de flux </span> </a> </li> <li class=md-nav__item> <a href=#etape-5-faire-le-menage class=md-nav__link> <span class=md-ellipsis> Étape 5 : Faire le ménage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#les-signaux-en-jeu class=md-nav__link> <span class=md-ellipsis> Les signaux en jeu </span> </a> </li> <li class=md-nav__item> <a href=#points-cles-a-retenir class=md-nav__link> <span class=md-ellipsis> Points clés à retenir </span> </a> </li> <li class=md-nav__item> <a href=#exercices-pratiques class=md-nav__link> <span class=md-ellipsis> Exercices pratiques </span> </a> <nav class=md-nav aria-label="Exercices pratiques"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#exercice-1-jonglage-de-processus class=md-nav__link> <span class=md-ellipsis> Exercice 1 : Jonglage de processus </span> </a> </li> <li class=md-nav__item> <a href=#exercice-2-observer-les-etats-des-processus class=md-nav__link> <span class=md-ellipsis> Exercice 2 : Observer les états des processus </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prochaine-etape class=md-nav__link> <span class=md-ellipsis> Prochaine étape </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../etats/ class=md-nav__link> <span class=md-ellipsis> Les états des processus </span> </a> </li> <li class=md-nav__item> <a href=../signal.md class=md-nav__link> <span class=md-ellipsis> Les signaux </span> </a> </li> <li class=md-nav__item> <a href=../zombie/ class=md-nav__link> <span class=md-ellipsis> Processus zombies </span> </a> </li> <li class=md-nav__item> <a href=../orphelin/ class=md-nav__link> <span class=md-ellipsis> Processus orphelins </span> </a> </li> <li class=md-nav__item> <a href=../priorites/ class=md-nav__link> <span class=md-ellipsis> Priorités </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Ressources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Ressources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ressources/processus/ class=md-nav__link> <span class=md-ellipsis> Processus Unix </span> </a> </li> <li class=md-nav__item> <a href=../../ressources/signaux/ class=md-nav__link> <span class=md-ellipsis> Signaux </span> </a> </li> <li class=md-nav__item> <a href=../../ressources/commandes.md class=md-nav__link> <span class=md-ellipsis> Commandes </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../about/ class=md-nav__link> <span class=md-ellipsis> À propos </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/manastria/proclab-unix-docs/edit/master/docs/activites/fg-bg.md title="Editer cette page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <h1 id=scenario-gestion-foregroundbackground>Scénario : Gestion Foreground/Background</h1> <p>Ce scénario vous permettra de découvrir comment Unix gère l'exécution simultanée de plusieurs processus dans un même terminal. Vous apprendrez à manipuler les processus entre le <strong>premier plan</strong> (<em>foreground</em>) et l'<strong>arrière-plan</strong> (<em>background</em>), et vous comprendrez comment le système permet cette flexibilité.</p> <h2 id=objectifs-dapprentissage>Objectifs d'apprentissage</h2> <p>À la fin de ce scénario, vous serez capable de :</p> <ul> <li>Identifier visuellement l'état d'exécution d'un processus</li> <li>Manipuler les processus entre premier plan et arrière-plan</li> <li>Comprendre la différence entre suspension et contrôle de flux</li> <li>Gérer plusieurs processus simultanément</li> </ul> <h2 id=concepts-fondamentaux>Concepts fondamentaux</h2> <h3 id=premier-plan-et-arriere-plan>Premier plan et arrière-plan</h3> <p>Pour comprendre la différence entre premier plan et arrière-plan, reprenons notre analogie du restaurant :</p> <div class="admonition example"> <p class=admonition-title>L'analogie du restaurant</p> <p>Imaginez un serveur qui s'occupe de plusieurs tables :</p> <ul> <li>La table dont il s'occupe activement est au "premier plan" - elle a toute son attention</li> <li>Les autres tables qu'il a en charge sont en "arrière-plan" - elles attendent leur tour</li> <li>Le serveur ne peut s'occuper activement que d'une seule table à la fois</li> <li>Même quand il ne s'en occupe pas, les clients des autres tables peuvent l'appeler si besoin</li> </ul> </div> <p>Dans un terminal Unix, cela se traduit ainsi :</p> <ul> <li>Un processus au <strong>premier plan</strong> (<em>foreground</em>) :</li> <li>Monopolise le terminal (comme le serveur avec sa table active)</li> <li>Reçoit les entrées clavier</li> <li> <p>Empêche l'utilisation du terminal pour d'autres tâches</p> </li> <li> <p>Un processus en <strong>arrière-plan</strong> (<em>background</em>) :</p> </li> <li>Continue de s'exécuter sans bloquer le terminal</li> <li>Peut afficher des messages à l'écran</li> <li>N'empêche pas l'utilisation du terminal</li> </ul> <h2 id=mise-en-pratique>Mise en pratique</h2> <h3 id=preparation-de-lenvironnement>Préparation de l'environnement</h3> <ol> <li>Lancez Terminator et divisez la fenêtre en deux verticalement avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-shift>Shift</kbd><span>+</span><kbd class=key-e>E</kbd></span></li> <li>Le terminal de gauche servira à lancer et manipuler nos processus</li> <li>Le terminal de droite nous permettra d'observer leur état avec la commande <code>ps</code></li> </ol> <h3 id=etape-1-observer-la-suspension-dun-processus>Étape 1 : Observer la suspension d'un processus</h3> <p>Commençons par comprendre comment fonctionne la suspension d'un processus :</p> <ol> <li> <p>Dans le terminal de gauche, lancez proclab :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>proclab
</code></pre></div> <p>Prenez un moment pour observer :</p> <ul> <li>Une fenêtre graphique s'ouvre avec un compteur qui s'incrémente</li> <li>Le temps d'exécution augmente régulièrement</li> <li>Le terminal est bloqué - vous ne pouvez pas y taper de commandes</li> <li>Le processus est au premier plan</li> </ul> </li> <li> <p>Maintenant, suspendez le processus avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> Vous verrez apparaître un message comme :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>[1]+ Stopped     proclab
</code></pre></div> <p>Observez attentivement ce qui se passe :</p> <ul> <li>Le compteur dans l'interface graphique est complètement figé</li> <li>Le temps d'exécution ne change plus</li> <li>Le terminal est redevenu disponible</li> <li>Le processus est suspendu (comme un serveur qui met une table en attente)</li> </ul> </li> <li> <p>Vérifiez l'état du processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nb>jobs</span>
</code></pre></div> <p>La commande affiche les processus gérés par le terminal :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>[1]+ Stopped    proclab
</code></pre></div> <p>Le <code>[1]</code> est le numéro de job - une identification locale au terminal.</p> </li> <li> <p>Reprenez l'exécution avec :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=nb>fg</span>
</code></pre></div> <p>Observez la reprise :</p> <ul> <li>Le compteur recommence à s'incrémenter</li> <li>Le temps d'exécution reprend</li> <li>Le terminal est à nouveau bloqué</li> <li>Le processus est revenu au premier plan</li> </ul> </li> </ol> <div class="admonition note"> <p class=admonition-title>Comprendre la suspension</p> <p>La suspension avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> arrête réellement l'exécution du processus. C'est comme mettre le processus en pause complète - aucun calcul n'est effectué pendant ce temps.</p> </div> <h3 id=etape-2-gerer-plusieurs-processus>Étape 2 : Gérer plusieurs processus</h3> <p>Maintenant que vous avez un processus au premier plan depuis l'étape précédente, nous allons apprendre à jongler entre plusieurs processus :</p> <ol> <li> <p>Commencez par suspendre le processus actuel avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> Le terminal est libéré et vous pouvez lancer d'autres instances.</p> </li> <li> <p>Lancez une deuxième instance et suspendez-la immédiatement :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>proclab
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1># Observez la nouvelle fenêtre qui s&#39;ouvre</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1># Appuyez sur CTRL+Z</span>
</code></pre></div> </li> <li> <p>Lancez une troisième instance et suspendez-la aussi :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>proclab
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=c1># Une troisième fenêtre apparaît</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=c1># Appuyez sur CTRL+Z</span>
</code></pre></div> </li> <li> <p>Listez tous vos processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=nb>jobs</span>
</code></pre></div> <p>Vous devriez voir :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>[1]    Stopped    proclab
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>[2]-   Stopped    proclab
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>[3]+   Stopped    proclab
</code></pre></div> <p>Chaque numéro correspond à une fenêtre spécifique de proclab.</p> </li> <li> <p>Reprenez le deuxième processus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=nb>fg</span><span class=w> </span>%2
</code></pre></div> <p>Observez attentivement : - Seule la deuxième fenêtre reprend son animation - Les autres restent figées - Le terminal est bloqué par ce processus</p> </li> </ol> <div class="admonition tip"> <p class=admonition-title>Identifier les fenêtres</p> <p>Quand vous reprenez un processus avec <code>fg %n</code>, regardez quelle fenêtre reprend son animation. Cela vous aide à comprendre la correspondance entre les numéros de jobs et les fenêtres graphiques.</p> </div> <h3 id=etape-3-execution-en-arriere-plan>Étape 3 : Exécution en arrière-plan</h3> <p>Un processus suspendu peut être relancé en arrière-plan plutôt qu'au premier plan. Pour l'expérimenter :</p> <ol> <li> <p>Si vous avez un processus au premier plan, suspendez-le avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span></p> </li> <li> <p>Listez vos processus suspendus :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nb>jobs</span>
</code></pre></div> </li> <li> <p>Relancez le premier processus en arrière-plan :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nb>bg</span><span class=w> </span>%1
</code></pre></div> </li> </ol> <p>Observez :</p> <ul> <li>La fenêtre correspondante reprend son animation</li> <li>Le terminal reste disponible</li> <li> <p>Vous pouvez continuer à taper des commandes</p> </li> <li> <p>Vous pouvez aussi lancer directement un processus en arrière-plan :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>proclab<span class=w> </span><span class=p>&amp;</span>
</code></pre></div> <p>Le <code>&amp;</code> à la fin de la commande indique au shell de lancer le processus directement en arrière-plan.</p> </li> </ul> <h3 id=etape-4-comprendre-le-controle-de-flux>Étape 4 : Comprendre le contrôle de flux</h3> <p>Pour cette dernière étape, nous allons découvrir une autre forme de contrôle, différente de la suspension :</p> <ol> <li> <p>Si vous avez des processus en cours, suspendez-les avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span></p> </li> <li> <p>Lancez proclab avec l'affichage terminal activé :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>proclab<span class=w> </span>--terminal-output
</code></pre></div> <p>Observez le double affichage :</p> <ul> <li>L'interface graphique montre le compteur</li> <li>Le terminal affiche aussi les valeurs du compteur</li> <li>Les deux sont synchronisés</li> </ul> </li> <li> <p>Appuyez sur <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-s>S</kbd></span></p> <p>Observez la différence de comportement :</p> <ul> <li>L'affichage dans le terminal se fige</li> <li>L'interface graphique continue de s'actualiser</li> <li>Le processus continue de tourner</li> <li>Le terminal semble bloqué</li> </ul> </li> <li> <p>Attendez quelques secondes (5-10) puis appuyez sur <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-q>Q</kbd></span></p> <p>Observez ce qui se passe :</p> <ul> <li>Le terminal affiche soudainement toutes les valeurs du compteur qu'il n'avait pas pu montrer</li> <li>L'interface graphique n'a jamais été affectée</li> <li>L'affichage dans le terminal reprend normalement</li> </ul> </li> </ol> <div class="admonition warning"> <p class=admonition-title>CTRL+S vs CTRL+Z</p> <p>Il y a une différence fondamentale : - <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> <strong>suspend</strong> réellement le processus (il ne s'exécute plus du tout) - <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-s>S</kbd></span> ne fait que <strong>geler l'affichage</strong> du terminal (le processus continue de s'exécuter)</p> </div> <h3 id=etape-5-faire-le-menage>Étape 5 : Faire le ménage</h3> <p>Au fil des étapes précédentes, nous avons accumulé plusieurs fenêtres proclab suspendues. Il est temps de faire le ménage ! Pour cela, nous allons utiliser la commande <code>kill</code> avec les numéros de jobs :</p> <ol> <li> <p>Commencez par lister tous les processus encore présents : <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=nb>jobs</span>
</code></pre></div> Vous verrez probablement plusieurs processus proclab suspendus ou en arrière-plan.</p> </li> <li> <p>Pour terminer un processus spécifique, utilisez <code>kill</code> avec le numéro de job : <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=nb>kill</span><span class=w> </span>%1<span class=w>   </span><span class=c1># Termine le job numéro 1</span>
</code></pre></div></p> <p>Observez :</p> <ul> <li>La fenêtre correspondante se ferme</li> <li>Un message indique que le job est terminé</li> <li>Le processus disparaît de la liste des jobs</li> </ul> </li> <li> <p>Répétez l'opération pour chaque job restant : <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nb>kill</span><span class=w> </span>%2<span class=w>   </span><span class=c1># Termine le job numéro 2</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=nb>kill</span><span class=w> </span>%3<span class=w>   </span><span class=c1># Termine le job numéro 3</span>
<a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=c1># etc...</span>
</code></pre></div></p> </li> <li> <p>Vérifiez qu'il ne reste plus de processus : <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nb>jobs</span>
</code></pre></div> La commande ne devrait plus rien afficher.</p> </li> </ol> <div class="admonition warning"> <p class=admonition-title>Importance du nettoyage</p> <p>Dans un environnement de production, il est crucial de ne pas laisser des processus suspendus ou abandonnés. Ils consomment des ressources système et peuvent créer de la confusion. Prenez l'habitude de toujours faire le ménage après vos manipulations.</p> </div> <h2 id=les-signaux-en-jeu>Les signaux en jeu</h2> <p>Ces manipulations reposent sur différents signaux Unix :</p> <pre class=mermaid><code>stateDiagram-v2
    [*] --&gt; Running: Lancement
    Running --&gt; Stopped: SIGTSTP (CTRL+Z)
    Stopped --&gt; Running: SIGCONT (fg/bg)
    Running --&gt; [*]: SIGINT (CTRL+C)

    note left of Running
        Premier plan ou
        arrière-plan
    end note</code></pre> <ul> <li><strong>SIGTSTP</strong> (Terminal Stop) : Envoyé par <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span>, suspend le processus</li> <li><strong>SIGCONT</strong> (Continue) : Envoyé par <code>fg</code> et <code>bg</code>, reprend l'exécution</li> <li><strong>SIGINT</strong> (Interrupt) : Envoyé par <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-c>C</kbd></span>, termine le processus</li> </ul> <h2 id=points-cles-a-retenir>Points clés à retenir</h2> <ol> <li>La suspension (<span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span>) arrête réellement l'exécution du processus</li> <li>Le contrôle de flux (<span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-s>S</kbd></span>/<span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-q>Q</kbd></span>) n'affecte que l'affichage</li> <li>Chaque terminal maintient sa propre liste de jobs</li> <li>Un processus en arrière-plan libère le terminal</li> <li>Les processus conservent leur état même suspendus</li> </ol> <h2 id=exercices-pratiques>Exercices pratiques</h2> <h3 id=exercice-1-jonglage-de-processus>Exercice 1 : Jonglage de processus</h3> <ol> <li>Lancez trois instances de proclab en arrière-plan avec <code>&amp;</code></li> <li>Ramenez-en une au premier plan avec <code>fg</code></li> <li>Suspendez-la avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span></li> <li>Vérifiez que les autres continuent en arrière-plan</li> </ol> <h3 id=exercice-2-observer-les-etats-des-processus>Exercice 2 : Observer les états des processus</h3> <p>Dans le terminal de droite, nous allons observer l'état de nos processus avec différentes options de ps :</p> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>ps<span class=w> </span>aux<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>proclab
</code></pre></div> <p>Observez la colonne STAT :</p> <ul> <li>'S' indique un processus en sommeil (sleep)</li> <li>'T' indique un processus stoppé (stopped)</li> <li>'R' indique un processus en cours d'exécution (running)</li> </ul> <p>Testez les différentes manipulations dans le terminal de gauche et observez les changements d'état : 1. Suspendez un processus avec <span class=keys><kbd class=key-control>Ctrl</kbd><span>+</span><kbd class=key-z>Z</kbd></span> 2. Reprenez-le en arrière-plan avec <code>bg</code> 3. Ramenez-le au premier plan avec <code>fg</code></p> <h2 id=prochaine-etape>Prochaine étape</h2> <p>Maintenant que vous maîtrisez la gestion des processus au premier plan et en arrière-plan, nous allons explorer un état particulier : les <a href=../zombie/ >processus zombies</a>.</p> </article> </div> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Retour en haut de la page </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Pied de page"> <a href=../arbo/ class="md-footer__link md-footer__link--prev" aria-label="Précédent: Arborescence"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Précédent </span> <div class=md-ellipsis> Arborescence </div> </div> </a> <a href=../etats/ class="md-footer__link md-footer__link--next" aria-label="Suivant: Les états des processus"> <div class=md-footer__title> <span class=md-footer__direction> Suivant </span> <div class=md-ellipsis> Les états des processus </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "navigation.footer", "content.action.edit", "toc.integrate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script> <script src=../../assets/javascripts/bundle.cd18aaf1.min.js></script> <script src=../../assets/extra.38b060.min.js></script> </body> </html>